<Page
    x:Class="XWingSquadronBuilder_v4.Presentation.Views.SquadronBuilder"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:XWingSquadronBuilder_v4.Presentation.Views"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:interfaces="using:XWingSquadronBuilder_v4.Interfaces"
    xmlns:userControls="using:XWingSquadronBuilder_v4.Presentation.UserControls"
    xmlns:Interactivity="using:Microsoft.Xaml.Interactivity"
    xmlns:Interactions="using:Microsoft.Xaml.Interactions.Core"   
    mc:Ignorable="d"
    RequestedTheme="Dark"
    Background="Black">    
    
    
    <RelativePanel>
        <FlyoutBase.AttachedFlyout>
            <Flyout Closed="Flyout_Closed">
                <userControls:UpgradePickerPopup/>
            </Flyout>
        </FlyoutBase.AttachedFlyout>
        <userControls:PilotsList x:Name="PilotList" 
                                 Pilots="{x:Bind ViewModel.PilotList,Mode=OneWay}"
                                 RelativePanel.AlignBottomWithPanel="True"
                                 RelativePanel.AlignTopWithPanel="True"
                                 RelativePanel.AlignLeftWithPanel="True">
            <Interactivity:Interaction.Behaviors>
                <Interactivity:BehaviorCollection>
                    <Interactions:EventTriggerBehavior EventName="PilotSelected">
                        <Interactions:InvokeCommandAction Command="{x:Bind ViewModel.AddPilotCommand}" />
                    </Interactions:EventTriggerBehavior>
                </Interactivity:BehaviorCollection>
            </Interactivity:Interaction.Behaviors>
        </userControls:PilotsList>
        <userControls:Squadron x:Name="Squadron"
                               RelativePanel.AlignBottomWithPanel="True"
                               RelativePanel.AlignTopWithPanel="True"                            
                               RelativePanel.AlignRightWithPanel="True"
                               RelativePanel.RightOf="PilotList"
                               Pilots="{x:Bind ViewModel.Squadron,Mode=OneWay}"
                               UpgradeSlotSelected="Squadron_UpgradeSlotSelected">
            <Interactivity:Interaction.Behaviors>
                <Interactivity:BehaviorCollection>
                    <Interactions:EventTriggerBehavior EventName="RemovePilot">
                        <Interactions:InvokeCommandAction Command="{x:Bind ViewModel.RemovePilotCommand}" />
                    </Interactions:EventTriggerBehavior>
                    <Interactions:EventTriggerBehavior EventName="CopyPilot">
                        <Interactions:InvokeCommandAction Command="{x:Bind ViewModel.AddPilotCommand}" />
                    </Interactions:EventTriggerBehavior>
                </Interactivity:BehaviorCollection>
            </Interactivity:Interaction.Behaviors>
        </userControls:Squadron>
    </RelativePanel>
</Page>
